# Dynamic365 솔루션 Table (Power Apps 사용)
> [공식문서](https://docs.microsoft.com/ko-kr/powerapps/maker/data-platform/entity-overview)

> [MS Learn](https://docs.microsoft.com/en-us/learn/modules/get-started-with-powerapps-common-data-service/)
> 

## 상품 테이블 생성

> [테이블 생성은 여기를 클릭해 들어간 DOCS를 확인하자](https://docs.microsoft.com/ko-kr/powerapps/maker/data-platform/data-platform-create-entity)
> Power Apps에서 테이블 탭에서 신규 -> 테이블을 선택하자<br>
    ![image](https://user-images.githubusercontent.com/39551265/149484292-67d908c8-d034-46f4-ac1c-61ff384002e4.png)

> 여기서는 D365앱에 처음부터 적용할 필요성이 있는 열,관계,보기, 폼의 생성을 다룰 것이다. 비지니스 규칙, 대시보드, 차트, 키, 명령, 데이터는 별도 문서에서 다루기로 하겠다.
1. 테이블 생성시 입력 내용(적당히 더 좋은 이름으로 바꿔 넣어보자) 아래는 필수적으로 넣어야 되는 부분이다.
    

    |속성| 설명 |
    |---|---|
    | 표시 이름 | 앱에 표시될 이름|
    | 복수 이름| 앱에 표시될 이름(표시이름을 적으면 기본적으로 같은 이름이 작성된다) |
    | 스키마 이름 | 스키마의 이름(Power Apps나 D365외에서는 이 이름으로 검색해야한다.) |
    | 레코드 소유권 | 수정등이 좋은 **사용자 또는 팀**을 사용하자 |


2. 테이블 요소 추가
    > 테이블 요소 **열**을 추가할 수 있다. 더 자세한 내용은 [공식문서](https://docs.microsoft.com/ko-kr/powerapps/maker/data-platform/fields-overview) 참조
    + 열 추가
        1. 상단의 탭중 열 선택후 +열추가 버튼을 눌러 스키마의 열에 해당되는 부분을 추가한다.<br>
         가장 기본적인 열들을 제공해주지만(생성시간, 생성자 등) 원하는 용도를 만들려면 추가하자
        
        2. 생성시 집어넣어야 하는 부분이다.
        
            |속성| 설명 |
            |---|---|
            | 표시 이름 | 앱에 표시될 이름|
            | 이름 | 테이블 열의 이름(Power Apps나 D365외에서는 이 이름으로 검색해야한다.) 앞의 _이전의 내용은 제작환경 혹은 Dataverse에 따라 전부 달라야한다. |
            | 데이터 형식 | SQL의 데이터 형식 선택이라 생각하자 데이터 형태에 따라 고급옵션의 내용이 달라진다 |
            | 필수 | 값이 꼭 존재해야하는지 여부 (참고로 Name은 기본제공의 필수 옵션이다.) |
            > 아래미지지는 상품의 이름을 생성하는 것을 가정한 예제다<br>
            ![image](https://user-images.githubusercontent.com/39551265/149483669-30ed44ab-970a-4ef8-83cc-ec8921ff2273.png)
                

        3. 생성한 것을 확인되면 오른쪽 아래부분에 저장버튼이 활성화 될 것이다. **(저장을 클릭하지 않으면 만들어놓은 내용이 지워지니 주의하자)**

    + 관계
        > 테이블 요소 테이블 관계(RelationShip)을 추가할 수 있다. 예를 들어 상품구매 테이블을 만든다고 할때 구매자에 대한 정보가 필요할 것이다. 구매자가 Contact(연락처) 테이블에 정보가 저장되어 있다면 이 테이블에도 어떤 Contact가 연결되어 있는지 저장해야 할 것이다. 이런 상황에는 열을 추가하지 말고 **관계에서 추가해야한다**. 더 자세한 내용은 [공식문서](https://docs.microsoft.com/ko-kr/powerapps/maker/data-platform/create-edit-entity-relationships) 참고
                
        1. 상단 탭중 관계 선택후 좌상단에 +관계 추가 클릭
        2. 관계 중 만들려는 관계를 클릭(현재 선택된 테이블이 왼쪽 연결하려는 테이블이 오른쪽이라고 생각하자)

            |관계|다른 용어|예시|
            |---|---|---|
            |다 대 일|N : 1|판매내역 : 구매고객|
            |일 대 다|1 : N|구매고객 : 판매내역|
            |다 대 다|N : N|상품 : 거래처|

        3. 새로 나온 창에서 관련(일) 테이블 에서 연결하려는('다 대 일' 의 경우 '일' 쪽) 테이블을 리스트에서 선택하여 연결한다.(Dataverse에 제작한 테이블이 전부 뜨고 검색 기능이 따로 없어서 **이름을 정확이** 알아야 한다) <br>
        ![image](https://user-images.githubusercontent.com/39551265/149685585-bc95c949-4aea-42e0-90b1-9c935e2b1161.png)
        
        4. 완료 클릭
        5. 관계가 추가된 것을 확인후 오른쪽 아랩분에 저장버튼을 클릭

    + 보기
        > 보기는 D365앱(사이트맵)에서 해당 테이블(하위영역)을 선택시 사용자에게 테이블에 등록된 데이터를 SQL 뷰 같이 사용자에게 보여줄 열과 조건을 선택해 보여줄 영역이다. `관련`은 다른 문서에서 다시 설명하겠다.

        1. 상단의 탭 중 보기 선택
        2. 뷰 추가로 새로운 보기 양식을 만들 수 있지만 여기서는 기본제공인 `활성 (Table이름)` 을 선택
        3. Power Apps 보기 화면으로 전환되었을 것이다.<br>
        ![image](https://user-images.githubusercontent.com/39551265/149707632-5c15c7e1-fc0d-4775-9b0f-9eb4f00aa71c.png)

        4. 여기서는 D365앱에서 설정을 바꾸지 않았을시에 해당 Table(하위영역)을 선택시 기본적으로 보여줄 뷰의 내용을 수정가능하다.
        5. 처음에는 Table에 직접 추가하거나 연결한 열이 없을 것이다. 필요한 내용을 추가해야한다.
        6. 좌상단에 `+열보기`를 클릭
        7. 열 리스트가 보일 것이다. 여기서 필요한 열을 클릭하여 추가한다.(제거시에는 가운데 뷰 화면에서 해당열을 클릭 -> 제거)
        8. 열을 드래그해 원하는 위치에 배치하고 길이를 조절한다.
        9. 정렬기준이 될 열을 선택 후 **오름차순 혹은 내림차순**을 선택한다.(더 많은 정렬기준 조건을 넣을 수 있지만 D365앱에서 다시 설명하겠다.)
        10. 저장 클릭(솔루션 내에서 저장되고 D365앱에는 아직 반영이 안된다.)
        11. 게시 클릭(게시를 해야 D365앱에서 반영이 된다.)

    + 폼
      > 폼은 D365앱에서 Table의 행에 해당되는 데이터를 추가 혹은 수정시 사용하게될 양식이다. 새로 추가하는건 별도 앱에서 추가하는 명령 등으로 추가될 것이지만 수정이나 추가로 보여주고 싶은 데이터(해당 상품의 주문 총개수 등)를 선택하고 싶을때 사용한다.

      1. 상단의 탭 중 폼 선택 

      2. 폼 리스트 중 양식 유형이 `Main`인 것을 클릭(이번에는 새로 추가하지 않고 기본 양식만 수정한다.)

      3. Power Apps 양식 화면으로 전환되었을 것이다.<br>
      ![image](https://user-images.githubusercontent.com/39551265/149718879-989770b9-730d-4b01-84af-0329f5567853.png)
      
      4. 처음 수정하는 것이면 담당자, Name 밖에 없을 것이다. 수정이 필요한 열이나 보여줘야하는 열을 추가해야한다.
      5. `+양식 필드`를 클릭(여기서는 양식필드로 추가 그리고 별도 HTML파일을 가져오는것만 설명할 것이다.)
      6. 좌측에 테이블 열 리스트 중 화면에 표시될 열을 선택해 드래그하여 가운데 화면에 넣자
      7. 저장 클릭(솔루션 내에서 저장되고 D365앱에는 아직 반영이 안된다.)
      8. 게시 클릭(게시를 해야 D365앱에서 반영이 된다.)
      
      + HTML 추가
      > 클래식 D365앱 솔루션에서 웹리소스 HTML을 화면에 추가할 수 있다. 현재는 별도로 관리하는 화면은 캔버스 앱을 추가하는 것이 추천되는데 예전 방식을 그대로 가져와야 하는 경우도 필요하거나 협력사에서 HTML 소스를 제작해 보내는 경우가 있으니 적는다. 웹 리소스를 업로드하는 방식은 별도 문서에서 설명하겠다.
        1. 클래식으로 전환 클릭
        2. 상단 탭중 삽입 전환
        3. 웹 리소스 클릭
        4. 웹 리소스에 업로드한 웹 리소스 파일 이름을 검색
        5. 이름(영어) 추가
        6. 레이블 추가 확인을 클릭<br>
        ![image](https://user-images.githubusercontent.com/39551265/149720729-8ee217e8-c833-4462-8fd5-74b5031479cc.png)
        7. 가운데 화면에서 파일이름과 영역이 생길것이다(유감스럽게도 제작한 HTML 그대로 바로 확인이 불가능하다) 적절한 위치로 옮기자<br>
        ![image](https://user-images.githubusercontent.com/39551265/149720826-b00ae7cf-bfa6-460c-9566-da10d483f110.png)
        8. 홈 탭으로 돌아와 저장후 닫기를 눌러 Power Apps로 돌아가자
        9. PowerApps에서 새로고침을 눌러 HTML이 제대로 반영됬는지 확인하자

## 기존 항목 추가
> 다른 솔루션에서 이미 테이블을 작성하거나 Dynamics365를 생성하며 미리 배치해둔 유용한 테이블이 다수 존재할 것이다. 현재 작성하고 있는 솔루션에서도 수정할 수 있도록 하거나 앱에 게시하기 위해서 기존 항목 추가를 통해 가져와야한다.
1. 테이블 관계로 가장 많이 사용하는 연락처(Contact)를 가져와 본다 가정하자
2. 상단에 **기존 항목 추가**를 클릭 -> 테이블을 선택하자
3. 기존 테이블 추가 창이 새로 생길 것이다. 그런데 D365로 제작시 편의를 제공하기 위해 이미 여러 만들어진 테이블이 존재할 것이다. 여기서는 오른쪽 상단 **테이블 검색**에서 테이블 명을 적는다(예 : 연락처 혹은 Contact) 이때 표시 이름만이 아닌 테이블 이름명으로 검색해도 된다.
4. 테이블을 선택하고 다음을 클릭한다.
5. 가져올 구성 요소를 선택해서 가져올 수 있는데 가능하면 모두 체크해서 가져오자(체크하지 않는다면 솔루션에서 테이블에 입력된 데이터만 확인이 가능하다)

## D365 앱 제작,개시
> 여기서는 위에서 제작한 Table을 이용해 D365앱을 생성하고 게시하는 것만을 설명한다.

1.  